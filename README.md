# Refactoring Deokhugam Team Project

## 📋 프로젝트 정보

### Git
- **Repository**: [deokhugam](https://github.com/sb01-deokhugam-team1/sb01-deokhugam-team1)

### Blog
- **개발 과정**: [velog](https://velog.io/@heejae/posts)

---

## 🛠️ 기존 구현 사항

### 📊 리뷰 API CRUD
- **리뷰 목록 조회**: 다양한 조건 검색, 정렬 및 커서 페이지네이션
- **Spring Batch 인기 리뷰**: Spring Batch를 이용한 대시보드 인기 리뷰 구현
- **인기 리뷰 목록 조회**: 기간 별 페이지네이션

---

## 🔧 리팩토링 사항

### 1. 커서 페이지네이션 리팩토링

#### 🚨 문제점
- **N + 1 문제** 발생

#### ✅ 해결방안 및 결과
- 커서 페이지네이션 호출시 **기존 61개 쿼리 → 21개 쿼리**로 개선

#### 📖 상세 내용
- [Fetch Join을 통한 쿼리 개선](https://velog.io/@heejae/%ED%8C%80-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EA%B0%80-%EB%81%9D%EB%82%9C-%ED%9B%84-%EB%A6%AC%ED%8E%99%ED%86%A0%EB%A7%811)

---

### 2. 인덱스

#### 🚨 문제점
- 커서 페이지네이션 조회 성능 문제

#### ✅ 해결방안 및 결과
- 커서 페이지네이션 조회 인덱스를 통해 성능 개선
- **DB에서 페이지네이션 조회 시 99% 개선**
- **DB에서 댓글 조회 시 91% 개선**
- **커서 페이지네이션 API 조회 시 46% 개선**

#### 📖 상세 내용
- [인덱스 도입](https://velog.io/@heejae/%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EB%8F%84%EC%9E%85)

---

### 3. 동시성 문제

#### 🚨 문제점
- 좋아요 호출 시 동시성 문제 발생

#### ✅ 해결방안 및 결과
- **낙관적락, 재시도**를 통해 동시성 문제 해결

#### 📖 상세 내용
- [동시성 이슈](https://velog.io/@heejae/%EB%8F%99%EC%8B%9C%EC%84%B1-%EC%9D%B4%EC%8A%88)

---

### 4. 캐시 도입

#### 🚨 문제점
- 자주 호출되는 인기 리뷰 로딩 속도 개선 필요

#### ✅ 해결방안 및 결과
- **인기 리뷰 커서 페이지네이션 조회시 91% 개선**

#### 📖 상세 내용
- [캐싱 도입](https://velog.io/@heejae/%EC%BA%90%EC%8B%B1-%EC%A0%84%EB%9E%B5)

---

## 📈 리팩토링을 통한 성능 개선 요약

| 개선 항목 | 개선 결과 |
|----------|----------|
| 커서 페이지네이션 쿼리 | 61개 → 21개 쿼리 |
| DB 페이지네이션 조회 | 99% 개선 |
| DB 댓글 조회 | 91% 개선 |
| 커서 페이지네이션 API | 46% 개선 |
| 캐시 적용 인기 리뷰 조회 | 91% 개선 |
